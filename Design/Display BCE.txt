title Display BCE

actor Staff
boundary StaffUI
control ScreeningSystem
participant Cinema
participant ScreeningMapper
participant ScreenMapper
participant MovieMapper
database db
entity PersistentScreening
Staff->StaffUI:submit(date : LocalDate)
activate StaffUI
StaffUI->ScreeningSystem:setDate(date : LocalDate)
activate ScreeningSystem

ScreeningSystem->Cinema:getScreenings(date : LocalDate)
activate Cinema

Cinema->ScreeningMapper:getScreenings(date : LocalDate)
activate ScreeningMapper
ScreeningMapper->db:executeQuery(sql : String)

loop for every row returned for Screenings
ScreeningMapper->ScreenMapper:s := getScreenforOid(screen : Integer)
ScreeningMapper->MovieMapper:m := getMovieForOid(movie : Integer)
ScreeningMapper->*PersistentScreening:PersistentScreening(oid : Integer, date : LocalDate, \nstart_time : LocalTime, s : Screen, m : Movie, ticket_sold : Integer)
activate PersistentScreening
PersistentScreening-->ScreeningMapper:
deactivate PersistentScreening
end


ScreeningMapper-->Cinema:return Screenings
deactivate ScreeningMapper


Cinema-->ScreeningSystem:return Screenings
deactivate Cinema

ScreeningSystem->ScreeningSystem:notifyObservers()
activate ScreeningSystem

ScreeningSystem->StaffUI:update()
activate StaffUI
StaffUI->ScreeningSystem:getDate()
activate ScreeningSystem
ScreeningSystem-->StaffUI:return date
deactivate ScreeningSystem

StaffUI->ScreeningSystem:getScreenings()
activate ScreeningSystem
ScreeningSystem-->StaffUI:return Screenings
deactivate ScreeningSystem

StaffUI-->ScreeningSystem:
deactivate StaffUI

ScreeningSystem-->ScreeningSystem:
deactivate ScreeningSystem
ScreeningSystem-->StaffUI:
deactivate ScreeningSystem
StaffUI-->Staff: