

actor Staff
boundary StaffUI
control ScreeningSystem
participant Restaurant
participant ScreeningMapper
participant ScreenMapper
participant MovieMapper
database db
entity PersistentScreening
Staff->StaffUI:submit(date : LocalDate)
activate StaffUI
StaffUI->ScreeningSystem:setDate(date : LocalDate)
activate ScreeningSystem

ScreeningSystem->Restaurant:getScreenings(date : LocalDate)
activate Restaurant

Restaurant->ScreeningMapper:getScreenings(date : LocalDate)
activate ScreeningMapper
ScreeningMapper->db:executeQuery(sql : String)

loop for every row returned for Screenings
ScreeningMapper->ScreenMapper:t := getScreenforOid(screen : Integer)
ScreeningMapper->MovieMapper:getMovieForOid(movie : Integer)
ScreeningMapper->*PersistentScreening:PersistentScreening(oid : Integer, capacity : Integer, \n    bdate : LocalDate, btime : LocalTime, s : Screen, m : Movie, atime : LocalTime)
activate PersistentScreening
PersistentScreening-->ScreeningMapper:
deactivate PersistentScreening
end


ScreeningMapper-->Restaurant:return Screenings
deactivate ScreeningMapper


Restaurant-->ScreeningSystem:return Screenings
deactivate Restaurant

ScreeningSystem->ScreeningSystem:notifyObservers()
activate ScreeningSystem

ScreeningSystem->StaffUI:update()
activate StaffUI
StaffUI->ScreeningSystem:getDate()
activate ScreeningSystem
ScreeningSystem-->StaffUI:return date
deactivate ScreeningSystem

StaffUI->ScreeningSystem:getScreenings()
activate ScreeningSystem
ScreeningSystem-->StaffUI:return Screenings
deactivate ScreeningSystem

StaffUI-->ScreeningSystem:
deactivate StaffUI

ScreeningSystem-->ScreeningSystem:
deactivate ScreeningSystem
ScreeningSystem-->StaffUI:
deactivate ScreeningSystem
StaffUI-->Staff: