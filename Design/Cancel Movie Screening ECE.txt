
title Cancel Movie Screening ECE

actor Staff
boundary ": ScreeningDialog" as SD
boundary ": AlertDialog" as AD
boundary ": StaffUI" as SU

control ": ManagementSystem" as MS

participant "：Cinema" as CNM
entity current：Screenings
#entity "s：Screen" as S
#entity "m：Movie" as M
entity "selected：Screening" as SS

#participant "：ScreeningMapper" as SM
#database DataBase

Staff ->SU: mousePressed(x : Integer, y : Integer)

activate SU
SU ->SU: screenNumber: yToScreen(y : Integer)
SU ->SU: time: xToTime: xTotime(x : Integer)

activate MS
SU->MS:selectScreening(screenNumber : Integer, time: LocalTime)
loop for all screenings on screen
MS->current：Screenings:time=getStartTime()
MS->current：Screenings:s=getScreen()
end 
MS->MS: notifyObservers()
MS->SU: update()
MS-->SU:
deactivate MS
SU-->Staff:
deactivate SU

Staff->SU:cancel()
activate SU
SU->MS: cancel()
activate MS

MS->*SD:ScreeningDialog()
activate SD
SD->Staff: confirm()
activate Staff
Staff-->SD: return "yes"
deactivate Staff
SD-->MS: confirm()
deactivate SD

MS->MS: checkTicketSold()
activate MS
MS-->MS: return true
deactivate MS

MS->*AD:showAndWait()
activate AD
AD->Staff: waitUser
Staff-->AD: user Confirm
AD-->MS:Dismiss()
deactivate AD


MS-->SU:
deactivate MS
SU-->Staff:
deactivate SU






